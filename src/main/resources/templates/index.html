<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/import :: import(title='首页', headContent=~{::#pageHead})}">
    <th:block id="pageHead">
        <style>
            /* 新闻板块专属样式 */
            .news-header {
                border-left: 4px solid #dc3545;
                padding-left: 1rem;
                margin: 2rem 0 1rem;
            }

            .news-item {
                border-bottom: 1px solid rgba(0, 0, 0, 0.1);
                padding: 1rem 0;
            }

            .news-title {
                font-size: 1.1rem;
                font-weight: 500;
            }

            .news-time {
                font-size: 0.85rem;
                color: #6c757d;
            }

            .news-content {
                font-size: 0.95rem;
                line-height: 1.6;
                margin-top: 0.5rem;
            }

            /* 折叠图标动画 */
            .transition-all {
                transition: all 0.3s ease;
            }

            /* 展开时旋转图标 */
            [aria-expanded="true"] .fa-angle-down {
                transform: rotate(-180deg);
            }

            /* 鼠标悬停手型 */
            .news-title a:hover {
                cursor: pointer;
            }
        </style>
    </th:block>
</head>
<body>

<div th:replace="~{fragments/header :: header(${user})}"></div>

<main class="container my-4">
    <!-- 新闻板块 -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <!-- 标题栏 -->
            <div class="d-flex align-items-center mb-3">
                <h4 class="news-header text-danger mb-0">
                    <i class="fas fa-bullhorn mr-2"></i>最新公告
                </h4>
            </div>

            <div th:if="${not #lists.isEmpty(news)}" class="news-list">
                <div th:each="item,itemStat : ${news}" class="news-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h5 class="news-title mb-0">
                                <a href="javascript:void(0)"
                                   class="text-dark text-decoration-none d-flex align-items-center"
                                   data-toggle="collapse"
                                   th:attr="data-target='#collapse'+${itemStat.index}"
                                   aria-expanded="${itemStat.first} ? 'true' : 'false'"
                                   aria-controls="collapse${itemStat.index}">
                                    <i class="fas fa-angle-down ms-2 transition-all mr-2"></i>
                                    <span th:text="${item.title}"></span>
                                </a>
                            </h5>
                        </div>
                    </div>
                    <div th:attr="id='collapse'+${itemStat.index}"
                         th:classappend="${itemStat.first} ? 'show' : ''"
                         class="collapse">
                        <div class="news-time">
                            <i class="fas fa-clock"></i>
                            <span th:text="${#temporals.format(item.createdAt, 'yyyy-MM-dd HH:mm')}"></span>
                        </div>
                        <div class="news-content mt-2" th:utext="${item.description}"></div>
                    </div>
                </div>
            </div>
            <!-- 空状态 -->
            <div th:if="${#lists.isEmpty(news)}" class="text-center text-muted py-4">
                <i class="fas fa-inbox fa-2x mb-2"></i>
                <p class="mb-0">暂无最新公告</p>
            </div>
        </div>
    </div>
</main>

<!-- 使用通用 Footer -->
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>